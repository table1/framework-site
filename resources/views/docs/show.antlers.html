<div class="relative mx-auto flex w-full max-w-8xl flex-auto justify-center sm:px-2 lg:px-8 xl:px-12">
    <!-- Left sidebar navigation -->
    <div class="hidden lg:relative lg:block lg:flex-none">
        <div class="absolute inset-y-0 right-0 w-[50vw] bg-slate-50 dark:hidden"></div>
        <div class="absolute top-16 right-0 bottom-0 hidden h-12 w-px bg-gradient-to-t from-slate-800 dark:block"></div>
        <div class="absolute top-28 right-0 bottom-0 hidden w-px bg-slate-800 dark:block"></div>
        <div class="sticky top-[4.75rem] -ml-0.5 h-[calc(100vh-4.75rem)] w-64 overflow-x-hidden overflow-y-auto py-16 pr-8 pl-0.5 xl:w-72 xl:pr-16">
            {{ partial:docs-nav }}
        </div>
    </div>

    <!-- Main content -->
    <div class="min-w-0 max-w-none flex-auto px-4 py-16 lg:pr-0 lg:pl-8 xl:px-16">
        <article>
            <header class="mb-9 space-y-1">
                {{ if category }}
                    {{ category }}
                        <p class="font-display text-sm font-medium text-sky-500">
                            <a href="/docs/{{ slug }}" class="hover:text-sky-600">{{ title }}</a>
                        </p>
                    {{ /category }}
                {{ /if }}
                <h1 class="font-display text-3xl tracking-tight text-slate-900 dark:text-white">{{ name }}</h1>
                {{ if title && title != name }}
                    <p class="text-sm text-slate-500 dark:text-slate-500">{{ title }}</p>
                {{ /if }}
                {{ if description && (description | trim) != (title | trim) }}
                    <p class="mt-4 text-lg text-slate-600 dark:text-slate-400">{{ description }}</p>
                {{ /if }}
            </header>

            <hr class="my-8 border-slate-200 dark:border-slate-800">

            <div class="prose prose-slate max-w-none dark:prose-invert dark:text-slate-400 prose-headings:scroll-mt-28 prose-headings:font-display prose-headings:font-normal lg:prose-headings:scroll-mt-[8.5rem] prose-lead:text-slate-500 dark:prose-lead:text-slate-400 prose-a:font-semibold dark:prose-a:text-sky-400 prose-a:no-underline hover:prose-a:text-sky-600 prose-pre:rounded-xl prose-pre:bg-slate-900 prose-pre:shadow-lg dark:prose-pre:bg-slate-800/60 dark:prose-pre:shadow-none dark:prose-pre:ring-1 dark:prose-pre:ring-slate-300/10 prose-code:before:content-none prose-code:after:content-none prose-h2:mt-12">

                <!-- Usage -->
                {{ if usage }}
                    <h2 id="usage">Usage</h2>
                    <pre><code class="language-r">{{ usage }}</code></pre>
                {{ /if }}

                <!-- Parameters -->
                {{ if parameters }}
                    <h2 id="arguments">Arguments</h2>
                    <div class="not-prose my-6 overflow-hidden rounded-xl border border-slate-200 dark:border-slate-700">
                        <table class="min-w-full divide-y divide-slate-200 text-left dark:divide-slate-700">
                            <thead class="bg-slate-50 dark:bg-slate-800/50">
                                <tr>
                                    <th scope="col" class="py-2.5 pl-4 pr-3 text-sm font-semibold text-slate-700 dark:text-slate-200">Argument</th>
                                    <th scope="col" class="px-3 py-2.5 text-sm font-semibold text-slate-700 dark:text-slate-200">Description</th>
                                </tr>
                            </thead>
                            <tbody class="divide-y divide-slate-200 bg-white dark:divide-slate-700 dark:bg-slate-900">
                                {{ parameters }}
                                <tr class="hover:bg-slate-50 dark:hover:bg-slate-800/50">
                                    <td class="whitespace-nowrap py-2.5 pl-4 pr-3 text-sm align-top">
                                        <code class="rounded-md bg-slate-100 px-1.5 py-0.5 font-mono text-sm font-semibold text-slate-700 dark:bg-slate-800 dark:text-slate-300">{{ name }}</code>
                                    </td>
                                    <td class="px-3 py-2.5 text-sm text-slate-600 dark:text-slate-400">{{ description | markdown }}</td>
                                </tr>
                                {{ /parameters }}
                            </tbody>
                        </table>
                    </div>
                {{ /if }}

                <!-- Details -->
                {{ if details }}
                    <h2 id="details">Details</h2>
                    {{ details | markdown }}
                {{ /if }}

                <!-- Value / Return -->
                {{ if value }}
                    <h2 id="returns">Returns</h2>
                    {{ value | markdown }}
                {{ /if }}

                <!-- Additional Sections -->
                {{ if sections }}
                    {{ sections }}
                        <h2 id="{{ section_title | slugify }}">{{ section_title }}</h2>
                        {{ content | markdown }}

                        {{ if subsections }}
                            {{ subsections }}
                                <h3 id="{{ subsection_title | slugify }}">{{ subsection_title }}</h3>
                                {{ content | markdown }}
                            {{ /subsections }}
                        {{ /if }}
                    {{ /sections }}
                {{ /if }}

                <!-- Examples -->
                {{ if examples }}
                    <h2 id="examples">Examples</h2>
                    {{ examples }}
                        <pre><code class="language-r">{{ code }}</code></pre>
                    {{ /examples }}
                {{ /if }}

                <!-- Note -->
                {{ if note }}
                    <div class="not-prose my-8 flex gap-2.5 rounded-2xl border border-sky-500/20 bg-sky-50/50 p-4 leading-6 text-sky-900 dark:border-sky-500/30 dark:bg-sky-500/5 dark:text-sky-200">
                        <svg viewBox="0 0 16 16" aria-hidden="true" class="mt-1 h-4 w-4 flex-none fill-sky-500 stroke-white dark:fill-sky-200/20 dark:stroke-sky-200">
                            <circle cx="8" cy="8" r="8" stroke-width="0"></circle>
                            <path fill="none" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M6.75 7.75h1.5v3.5"></path>
                            <circle cx="8" cy="4" r=".5" fill="none"></circle>
                        </svg>
                        <div class="[&>:first-child]:mt-0 [&>:last-child]:mb-0">
                            {{ note | markdown }}
                        </div>
                    </div>
                {{ /if }}

                <!-- Aliases -->
                {{ if aliases }}
                    <h2 id="aliases">Aliases</h2>
                    <p>This function is also available as:</p>
                    <ul>
                        {{ aliases }}
                            <li><code>{{ value }}</code></li>
                        {{ /aliases }}
                    </ul>
                {{ /if }}

                <!-- See Also -->
                {{ if seealso }}
                    <h2 id="see-also">See Also</h2>
                    <ul>
                        {{ seealso }}
                            <li>
                                {{ if link_type == "url" }}
                                    <a href="{{ url }}" target="_blank" rel="noopener">{{ reference }}</a>
                                {{ else }}
                                    <a href="/docs/{{ reference | slugify }}">{{ reference }}</a>
                                {{ /if }}
                            </li>
                        {{ /seealso }}
                    </ul>
                {{ /if }}

                <!-- Source -->
                {{ if source_file }}
                    <div class="mt-16 border-t border-slate-200 pt-6 dark:border-slate-800">
                        <p class="text-sm text-slate-500 dark:text-slate-400">
                            Source: <a href="https://github.com/table1/framework/blob/main/{{ source_file }}" target="_blank" rel="noopener" class="font-mono text-sky-600 hover:text-sky-700 dark:text-sky-400 dark:hover:text-sky-300">{{ source_file }}</a>
                        </p>
                    </div>
                {{ /if }}
            </div>
        </article>

    </div>

    <!-- Right sidebar: On This Page -->
    <div class="hidden xl:sticky xl:top-[4.75rem] xl:-mr-6 xl:block xl:h-[calc(100vh-4.75rem)] xl:flex-none xl:overflow-y-auto xl:py-16 xl:pr-6">
        <nav aria-labelledby="on-this-page-title" class="w-56">
            <h2 id="on-this-page-title" class="font-display text-sm font-medium text-slate-900 dark:text-white">On this page</h2>
            <ol role="list" class="mt-4 space-y-3 text-sm">
                {{ if usage }}
                    <li><a href="#usage" class="text-slate-500 hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-300">Usage</a></li>
                {{ /if }}
                {{ if parameters }}
                    <li><a href="#arguments" class="text-slate-500 hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-300">Arguments</a></li>
                {{ /if }}
                {{ if details }}
                    <li><a href="#details" class="text-slate-500 hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-300">Details</a></li>
                {{ /if }}
                {{ if value }}
                    <li><a href="#returns" class="text-slate-500 hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-300">Returns</a></li>
                {{ /if }}
                {{ if sections }}
                    {{ sections }}
                        <li><a href="#{{ section_title | slugify }}" class="text-slate-500 hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-300">{{ section_title }}</a></li>
                    {{ /sections }}
                {{ /if }}
                {{ if examples }}
                    <li><a href="#examples" class="text-slate-500 hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-300">Examples</a></li>
                {{ /if }}
                {{ if aliases }}
                    <li><a href="#aliases" class="text-slate-500 hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-300">Aliases</a></li>
                {{ /if }}
                {{ if seealso }}
                    <li><a href="#see-also" class="text-slate-500 hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-300">See Also</a></li>
                {{ /if }}
            </ol>
        </nav>
    </div>
</div>
